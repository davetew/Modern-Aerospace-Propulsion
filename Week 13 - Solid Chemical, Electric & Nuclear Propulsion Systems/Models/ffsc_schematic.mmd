%%{init: {'theme':'dark','themeVariables': {'lineColor':'#ffffff','primaryTextColor':'#ffffff'}}}%%
graph TB
    %% Fuel side (left)
    LCH4[LCH4 Tank<br/>~110 K]
    FuelPump[Fuel Pump<br/>ΔP ≈ 25.6 MPa]
    FuelPB[Fuel-Rich<br/>Preburner<br/>φ = 1.3<br/>T ≈ 3669 K]
    FuelTurb[Fuel Turbine<br/>ΔT ≈ 2669 K]
    %% Oxidizer side (right)
    LOX[LOX Tank<br/>~90 K]
    OxPump[Oxidizer Pump<br/>ΔP ≈ 23.4 MPa]
    OxPB[Ox-Rich<br/>Preburner<br/>φ = 0.7<br/>T ≈ 3578 K]
    OxTurb[Oxidizer Turbine<br/>ΔT ≈ 2578 K]
    %% Cooling system
    Jacket[Regenerative<br/>Cooling Jacket<br/>ΔP ≈ 2.2 MPa<br/>ΔT ≈ 820 K]
    %% Combustion chamber
    Chamber[Main<br/>Combustion<br/>Chamber<br/>O/F = 3.2<br/>T₀ ≈ 3703 K<br/>p₀ = 20 MPa]
    Nozzle[Nozzle<br/>ε = 15<br/>Isp = 303 s]
    Thrust[Thrust<br/>500 kN]
    %% Fuel flow path
    LCH4 -->|40.1 kg/s| FuelPump
    FuelPump -->|Split| Jacket
    FuelPump -->|To PB| FuelPB
    Jacket -->|Hot CH₄<br/>~930 K| Chamber
    %% Small amount of LOX to fuel preburner
    OxPump -.->|Small flow| FuelPB
    FuelPB -->|Hot gas<br/>3669 K| FuelTurb
    FuelTurb -->|~1000 K| Chamber
    %% Oxidizer flow path  
    LOX -->|128.3 kg/s| OxPump
    OxPump -->|Split| OxPB
    OxPump -->|To Chamber| Chamber
    %% Small amount of CH₄ to ox preburner
    FuelPump -.->|Small flow| OxPB
    OxPB -->|Hot gas<br/>3578 K| OxTurb
    OxTurb -->|~1000 K| Chamber
    %% Power transmission (mechanical coupling)
    FuelTurb -.->|Shaft<br/>Power| FuelPump
    OxTurb -.->|Shaft<br/>Power| OxPump
    %% Exhaust
    Chamber --> Nozzle
    Nozzle --> Thrust
    %% Styling
    classDef fuel fill:#ff9999,stroke:#cc0000,stroke-width:3px,color:#000000
    classDef ox fill:#9999ff,stroke:#0000cc,stroke-width:3px,color:#000000
    classDef hot fill:#ffcc99,stroke:#ff6600,stroke-width:3px,color:#000000
    classDef chamber fill:#ffff99,stroke:#cccc00,stroke-width:4px,color:#000000
    class LCH4,FuelPump,FuelPB,FuelTurb,Jacket fuel
    class LOX,OxPump,OxPB,OxTurb ox
    class Chamber,Nozzle chamber

    linkStyle default stroke:#ffffff,stroke-width:3px
